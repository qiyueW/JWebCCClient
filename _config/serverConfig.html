<!DOCTYPE html>

<head>
    <title>服务器配置</title>
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="../static/uikit/dist/css/uikit.min.css" />
    <!-- UIkit JS -->
    <script src="../static/uikit/dist/js/uikit.min.js"></script>
    <script src="../static/uikit/dist/js/components/notification.min.js"></script>
    <script src="../static/uikit/dist/js/uikit-icons.min.js"></script>
    <!-- 窗口交互 -->
    <script src="../static/_common/win/winRenderer.js"></script>

    <script>
        const finalVar = require('../static/_common/_lowdb/_lowdbConst.js'); 
        const key=require('../static/_common/Key.js');
    </script>
    <script src="../static/_common/_lowdb/lowdbRenderer.js"></script>

    <!-- 模块js -->
    <script src="../static/_config/serverConfig.js"></script>

    <script>
        function saveConfig(){
            if(saveServer_configDB(
                window.document.getElementById('configURL').value
                ,window.document.getElementById('configAccount').value
                ,window.document.getElementById('configPassword').value
            )){
                UIkit.notification({
                    message : '保存成功!',
                    status  : 'success',
                    timeout : 2000,
                    pos     : 'top-center'
                });
            }
        }

        window.onload=function(){
            var obj=getServer_configDB();
            window.document.getElementById('configURL').value=obj[finalVar.system_config_server_url];
            window.document.getElementById('configAccount').value=obj[finalVar.system_config_server_userAccount];
            window.document.getElementById('configPassword').value=obj[finalVar.system_config_server_userPassword];
        }
    </script>
</head>
<style>
    html,
    body {
        height: 100%;
    }

    .formCenter {
        flex-grow: 1
    }

    .formCenter div {
        margin: 8px;
    }
</style>

<body style="display:flex; flex-direction: column;">
    <div class="uk-tile uk-text-center uk-tile-secondary">服务器参数配置</div>
    <div style="height: 20px;"></div>

    <div class="formCenter">
        <div>
            <span class="uk-label">服务器路径</span>
            <input id='configURL' class="uk-input" type="text" placeholder="https://nuwait.cn">
        </div>
        <div>
            <span class="uk-label">登录账号</span>
            <input id='configAccount' class="uk-input" type="text" placeholder="账号">
        </div>
        <div>
            <span class="uk-label">登录密码</span>
            <input id='configPassword' class="uk-input" type="text" placeholder="密码">
        </div>
    </div>

    <div style="align-items: flex-end ; display: flex; justify-content: center; margin: 15px;">
        <button class="uk-button uk-button-default" onclick="f_close_root_config_server()">关闭</button>
        <button class="uk-button uk-button-primary" onclick="saveConfig();">保存</button>
    </div>
</body>

</html>